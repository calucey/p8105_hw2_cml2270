---
title: "C.Lucey P8105 Homework 2 Data Wrangling"
output: html_document
---
## Setup
Only done once, the setup code loads the necessary libraries and double checks that the working directory is correct.

```{r setup, eval = FALSE}
library(tidyverse)
library(readxl)
getwd()
```
# Problem 1: Mr. Trash Wheel

## Importing and Cleaning the Mr. Trash Wheel Dataset

```{r import and clean trash man data}

mrtrash_df = read_xlsx("data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
           sheet = "Mr. Trash Wheel",
           range = "A2:N408",
           col_names = TRUE
           ) %>%
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(sports_balls = round(sports_balls, 0))

```

## Importing and Cleaning Precipitaiotn Data for 2018 and 2019

```{r import and read precipitation data}
rain_2018 = read_xlsx("data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
          sheet = "2018 Precipitation",
          range = "A2:B14",
          col_names = TRUE
          ) %>% 
  janitor::clean_names() %>% 
  mutate(year = 2018) %>% 
  mutate(month = month.name[as.numeric(month)])

rain_2019 = read_xlsx("data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
          sheet = "2019 Precipitation",
          range = "A2:B14",
          col_names = TRUE
          ) %>%
  janitor::clean_names() %>% 
  drop_na() %>% 
  mutate(year = 2019) %>% 
  mutate(month = month.name[as.numeric(month)])

annualrain_df = bind_rows(rain_2018, rain_2019)

```

## DESCRIPTION OF THESE DATA 

DONT FORGET TO GO BACK AND CHANGE THE NAME OF THE TOTAL PRECIPITAITON COLUMN

# Problem 2: FiveThirtyEight

```{r import pols_month and snp data}

pols_df = read_csv("data/fivethirtyeight_datasets/pols-month.csv") %>% 
  separate(mon, into = c("year", "month", "day")) %>%
  mutate(month = month.name[as.numeric(month)]) %>% 
  mutate(president = 
          ifelse(prez_dem == 1, "dem","gop")) %>% 
  select(-prez_dem, -prez_gop, -day) %>% 
  mutate(year = as.numeric(year))

snp_df = read_csv("data/fivethirtyeight_datasets/snp.csv") %>% 
  separate(date, into = c("month", "day", "year")) %>% 
  mutate(month = month.name[as.numeric(month)]) %>% 
  select(-day) %>% 
  relocate(year) %>% 
  mutate(year = as.numeric(year))
  
```

```{r tidying unemployment data}

unemploy_df = read_csv("data/fivethirtyeight_datasets/unemployment.csv") %>% 
  janitor::clean_names() %>% 
  pivot_longer(
    jan:dec,
    names_to = "month",
    values_to = "unemployment_rate") %>% 
  mutate(year = as.numeric(year))
```

```{r joining pols and snp}

pols_snp_join = inner_join(unemploy_df, pols_df, by = "year", "month")
```

